<?php

/**
 * @file
 * Aprendiendo a programar con Drupal
 * Modulo de HOLA MUNDO
 */

/**
 * Implements hook_menu().
 */
function saludar_menu() {
	// Ruta de la página de saludo.
	$items['saludar/hola-mundo'] = array (
		 'title' => 'Saludar',
		 'page callback' => 'saludar_pagina_hola_mundo', //Función a ejecutar
		 'access callback' => TRUE, // Acceso libre
	);

  return $items;
}

/**
 * Function Controller saludar_hola_mundo
 */
function saludar_pagina_hola_mundo() {
	$fecha = time();
	global $user;
	$usuario = user_load($user->uid);
	$foto = "";
	if ($user->uid) {
		$foto = theme('image_style', array('style_name' => 'thumbnail', 'path' => $usuario->picture->uri));
	}
	
	$variables = array (
		'saludo' => variable_get('saludo', 'Hola Mundo!'),
		'fecha' => date('h:i:s', $fecha),
		'usuario' => $usuario,
		'foto' => $foto,
	);
	return theme('saludar_hola_mundo_pagina', $variables);
}

function saludar_theme() {
  $templates = array (
		'saludar_hola_mundo_pagina' => array('template' => 'templates/saludar-hola-mundo',),
  );
  return $templates;
}




